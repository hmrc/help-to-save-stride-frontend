@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import cats.syntax.eq._
@import cats.instances.char._
@import cats.instances.string._

@import uk.gov.hmrc.helptosavestridefrontend.config.FrontendAppConfig
@import uk.gov.hmrc.helptosavestridefrontend.controllers.routes
@import uk.gov.hmrc.helptosavestridefrontend.models.CountryCode.countryCodes
@import uk.gov.hmrc.helptosavestridefrontend.views.html.helpers

@import uk.gov.hmrc.play.views.html.{helpers => uiHelpers}


@(nino: String)(implicit request: Request[_], messages: Messages, appConfig: FrontendAppConfig)

@sectionBreak= { <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible"> }

@uk.gov.hmrc.helptosavestridefrontend.views.html.main_template(
    title = messages("hts.customer-eligible.enter-details.title"),
    bodyClasses = None) {

    <h1>@messages("hts.customer-eligible.enter-details.title")</h1>
    <p>@messages("hts.customer-eligible.enter-details.p1")</p>

    @helpers.form(routes.StrideController.customerEligibleSubmit(), 'id -> "userDetailsForm") {

        <h2>@messages("hts.customer-eligible.enter-details.form.personal-details.title")</h2>

        @helpers.input_text(
            id = "forename",
            label = messages("hts.customer-eligible.enter-details.form.personal-details.forename.label"),
            value = "",
            inputType = "text",
            inputClass = Some("form-control-1-3"),
            name = "forename",
            errorMessage = None
        )

        @helpers.input_text(
            id = "surname",
            label = messages("hts.customer-eligible.enter-details.form.personal-details.surname.label"),
            value = "",
            inputType = "text",
            inputClass = Some("form-control-1-3"),
            name = "surname"
        )

        @sectionBreak

        <fieldset class="form-group">
            <div class="form-group  soft--ends" id="dob">
                <legend><span class="form-label">@messages("hts.customer-eligible.enter-details.form.personal-details.date-of-birth.label")</span></legend>

                <span class="form-hint">@messages("hts.customer-eligible.enter-details.form.personal-details.date-of-birth.hint")</span>
                <div class="form-date">
                    <div class="form-group form-group-day">
                        <label for="dob-day" class="form-label  ">
                            <span>@messages("hts.customer-eligible.enter-details.form.personal-details.date-of-birth.day.label")</span>
                            <input type="number" class="form-control" name="dob-day" id="dob-day" value="">
                        </label>
                    </div>

                    <div class="form-group form-group-month">
                        <label for="dob-month" class="form-label">
                            <span>  @messages("hts.customer-eligible.enter-details.form.personal-details.date-of-birth.month.label")</span>
                            <input type="number" class="form-control" name="dob-month" id="dob-month" value="">
                        </label>
                    </div>

                    <div class="form-group form-group-year">
                        <label for="dob-year" class="form-label">
                            <span>
                            @messages("hts.customer-eligible.enter-details.form.personal-details.date-of-birth.year.label")
                            </span>
                            <input type="number" class="form-control" name="dob-year" id="dob-year" value="">
                        </label>
                    </div>
                </div>
            </div>

        </fieldset>

        @sectionBreak

        @helpers.input_text(
            id = "nino",
            label = messages("hts.customer-eligible.enter-details.form.personal-details.nino.label"),
            value = nino,
            inputType = "text",
            inputClass = Some("form-control-1-3"),
            name = "nino",
            hint = Some(messages("hts.customer-eligible.enter-details.form.personal-details.nino.hint")),
            readOnly = true
        )

        @sectionBreak

        <h2>@messages("hts.customer-eligible.enter-details.form.address.title")</h2>

        @helpers.input_text(
            id = "address1",
            label = messages("hts.customer-eligible.enter-details.form.address.title.address1.label"),
            value = "",
            inputType = "text",
            inputClass = Some("form-control-1-3"),
            name = "address1"
        )

        @helpers.input_text(
            id = "address1",
            label = messages("hts.customer-eligible.enter-details.form.address.title.address1.label"),
            value = "",
            inputType = "text",
            inputClass = Some("form-control-1-3"),
            name = "address1"
        )

        @helpers.input_text(
            id = "address2",
            label = messages("hts.customer-eligible.enter-details.form.address.title.address2.label"),
            value = "",
            inputType = "text",
            inputClass = Some("form-control-1-3"),
            name = "address2"
        )

        @helpers.input_text(
            id = "address3",
            label = messages("hts.customer-eligible.enter-details.form.address.title.address3.label"),
            value = "",
            inputType = "text",
            inputClass = Some("form-control-1-3"),
            name = "address3"
        )

        @helpers.input_text(
            id = "address4",
            label = messages("hts.customer-eligible.enter-details.form.address.title.address4.label"),
            value = "",
            inputType = "text",
            inputClass = Some("form-control-1-3"),
            name = "address4"
        )

        @helpers.input_text(
            id = "address5",
            label = messages("hts.customer-eligible.enter-details.form.address.title.address5.label"),
            value = "",
            inputType = "text",
            inputClass = Some("form-control-1-3"),
            name = "address5"
        )

        @helpers.input_text(
            id = "postcode",
            label = messages("hts.customer-eligible.enter-details.form.address.title.postcode.label"),
            value = "",
            inputType = "text",
            inputClass = Some("form-control-1-3"),
            name = "postcode"
        )

        <div class=form-group">
            <label class="form-label" for="countryCode">@messages("hts.customer-eligible.enter-details.form.address.title.country.label")</label>
            <select class="form-control-1-3" id="countryCode" name="countryCode">
            @countryCodes.sortBy(_._1).map{ case (countryName: String, countryCode: String) =>
              <option value="@countryCode" @if(countryName.toUpperCase === "GREAT BRITAIN"){ selected }>
                @{countryName.toLowerCase.foldLeft("" → true){ case ((acc, captilize), c) ⇒
                    val capitalizeNext = c === ' ' | c === '(' | c === '-'
                    if(captilize){
                        (acc + c.toUpper.toString) → capitalizeNext
                    } else {
                        (acc + c.toString) → capitalizeNext
                    }
                }._1}
                </option>
            }
            </select>
        </div>

        <section class="subsection push--bottom">
        @helpers.submit('_buttonClass -> "", 'id → "continue") { @messages("hts.customer-eligible.enter-details.form.submit") }
        </section>


    }

    <a href="@{routes.StrideController.getApplicationCancelledPage().url}" id="end-call">@messages("hts.customer-eligible.enter-details.cancel-application")</a>

}
